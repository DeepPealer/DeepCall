# Лабораторная работа №7: Элементы теории расписаний. Алгоритм Джонсона  
**Тема:** Планирование последовательности обработки деталей на двух станках  
**Вариант:** 16  
**Исполнитель:** Ушаков А.А., ПИ-41  

---

## 1. Постановка задачи

Дано $n = 5$ деталей, которые должны быть обработаны последовательно сначала на **станке I**, затем на **станке II**. Порядок обработки одинаков для обоих станков (т.е. перестановка деталей — общая).

Время обработки:

| Деталь $i$ | 1  | 2  | 3  | 4  | 5  |
|------------|----|----|----|----|----|
| $A_i$ (станок I) | 3  | 2  | 1  | 8  | 7  |
| $B_i$ (станок II) | 2  | 3  | 6  | 4  | 8  |

**Требуется:**
1. Построить временную диаграмму (Ганта) для исходной последовательности $S_0 = (1,2,3,4,5)$ и найти $T_{\text{исх}}$.
2. Найти оптимальную последовательность с помощью **алгоритма Джонсона**.
3. Построить временную диаграмму для оптимальной последовательности и найти $T_{\text{опт}}$.
4. Сравнить и сделать вывод.

---

## 2. Исходная последовательность $S_0 = (1,2,3,4,5)$

Рассчитываем времена начала и окончания обработки:

- $t_{1,\text{нач}}(i) = t_{1,\text{кон}}(i-1)$  
- $t_{1,\text{кон}}(i) = t_{1,\text{нач}}(i) + A_i$  
- $t_{2,\text{нач}}(i) = \max(t_{1,\text{кон}}(i),\, t_{2,\text{кон}}(i-1))$  
- $t_{2,\text{кон}}(i) = t_{2,\text{нач}}(i) + B_i$

| Деталь | $A_i$ | $B_i$ | $t_{1,\text{нач}}$ | $t_{1,\text{кон}}$ | $t_{2,\text{нач}}$ | $t_{2,\text{кон}}$ |
|--------|--------|--------|---------------------|---------------------|---------------------|---------------------|
| 1      | 3      | 2      | 0                   | 3                   | 3                   | 5                   |
| 2      | 2      | 3      | 3                   | 5                   | 5                   | 8                   |
| 3      | 1      | 6      | 5                   | 6                   | 8                   | 14                  |
| 4      | 8      | 4      | 6                   | 14                  | 14                  | 18                  |
| 5      | 7      | 8      | 14                  | 21                  | 21                  | 29                  |

Общая длительность цикла:  
$$
T_{\text{исх}} = t_{2,\text{кон}}(5) = 29
$$

> Простои станка II:  
> - от 0 до 3 (ожидание первой детали),  
> - от 18 до 21 (ожидание пятой детали после завершения четвёртой).

---

## 3. Алгоритм Джонсона

**Правило Джонсона (для двух станков):**

1. Найти $\min\{A_i, B_i \mid i = 1,\dots, n\}$.
2. Если минимум достигнут в $A_k$ — поставить деталь $k$ **в начало** текущей последовательности.
3. Если минимум достигнут в $B_k$ — поставить деталь $k$ **в конец** текущей последовательности.
4. Исключить деталь $k$ из рассмотрения.
5. Повторять, пока все детали не расставлены.

### Пошаговое применение (вариант 16):

- Исходные данные:  
  $A = [3, 2, 1, 8, 7]$,  
  $B = [2, 3, 6, 4, 8]$

| Шаг | $\min$ | Где | Действие | Последовательность | Оставшиеся детали |
|-----|---------|------|----------|--------------------|-------------------|
| 1   | 1 (дет. 3, $A_3$) | I | В начало | **3**, … | {1,2,4,5} |
| 2   | 2 (дет. 2, $A_2$; дет. 1, $B_1$) | I и II | Дет. 2 — в начало, дет. 1 — в конец | **3, 2**, …, **1** | {4,5} |
| 3   | 4 (дет. 4, $B_4$) | II | В конец (перед 1) | **3, 2**, …, **4, 1** | {5} |
| 4   | — | — | Единственная оставшаяся → в центр | **3, 2, 5, 4, 1** | — |

**Оптимальная последовательность:**  
$$
S^* = (3, 2, 5, 4, 1)
$$

---

## 4. Оптимальная последовательность $S^* = (3,2,5,4,1)$

Расчёт времён:

| Деталь | $A_i$ | $B_i$ | $t_{1,\text{нач}}$ | $t_{1,\text{кон}}$ | $t_{2,\text{нач}}$ | $t_{2,\text{кон}}$ |
|--------|--------|--------|---------------------|---------------------|---------------------|---------------------|
| 3      | 1      | 6      | 0                   | 1                   | 1                   | 7                   |
| 2      | 2      | 3      | 1                   | 3                   | 7                   | 10                  |
| 5      | 7      | 8      | 3                   | 10                  | 10                  | 18                  |
| 4      | 8      | 4      | 10                  | 18                  | 18                  | 22                  |
| 1      | 3      | 2      | 18                  | 21                  | 22                  | 24                  |

Общая длительность цикла:  
$$
T_{\text{опт}} = t_{2,\text{кон}}(1) = 24
$$

> Простой станка II: только от 0 до 1 (1 ед. времени). Далее — непрерывная работа.

---

## 5. Сравнение и вывод

| Показатель | Значение |
|------------|----------|
| $T_{\text{исх}}$ | 29 |
| $T_{\text{опт}}$ | 24 |
| Экономия $\Delta T$ | $29 - 24 = 5$ |
| Относительная экономия | $\frac{5}{29} \approx 17.2\%$ |

**Выводы:**
- Алгоритм Джонсона позволяет построить оптимальную последовательность обработки, минимизирующую общее время завершения работ (makespan).
- В исходной последовательности наблюдались два периода простоя станка II, в оптимальной — один минимальный.
- Алгоритм эффективен и гарантированно находит глобальный минимум для задачи $F2 \mid \mid C_{\max}$ (flow shop, 2 станка, одинаковый порядок, минимизация $C_{\max}$).
- Для $n = 5$ сложность пренебрежимо мала; алгоритм масштабируется линейно — $O(n \log n)$ при сортировке.

---

## 6. Термины и определения (для защиты)

| Термин                         | Определение                                                                                                                                                                   |
| ------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Makespan ($C_{\max}$)**      | Общая длительность выполнения всех работ — момент завершения последней операции на последнем станке.                                                                          |
| **Flow Shop**                  | Модель производства, где все детали проходят одни и те же станки в одинаковом порядке.                                                                                        |
| **Диаграмма Ганта**            | Наглядное представление расписания во времени: горизонтальные полосы — операции, ось абсцисс — время.                                                                         |
| **Простой оборудования**       | Интервал времени, когда станок не работает, но процесс ещё не завершён (ожидание детали).                                                                                     |
| **Алгоритм Джонсона**          | Точный полиномиальный алгоритм для минимизации makespan в задаче flow shop с двумя станками.                                                                                  |
| **Правило Джонсона**           | Если $A_i \le B_j$, деталь $i$ ставится раньше детали $j$ (эквивалентная формулировка через сортировку по $\min(A_i, B_i)$ с разделением на «левые» и «правые» подмножества). |
| **Перестановочное расписание** | Расписание, в котором порядок деталей на всех станках одинаков (допустимо не всегда, но оптимально для $m = 2$).                                                              |